# Metabuild 2025  
*Zero-to-hero, cross-platform build cocoon*  

> **Prerequisite:** a working installation of **Docker Instalation** (any recent 24-plus release on macOS, Windows, or modern Linux). That’s it.

***

## Repository layout

| Path | What lives here | Why it matters |
|------|-----------------|----------------|
| **`Dockerfile`** | Multi-stage Alpine image with every cross-compiler we care about | You never install toolchains locally. |
| **`metabuild`** & **`build.bat`** | One-shot launchers | Pull (or build) the image and drop you into `make`. |
| **`metabuild.mk`** | Matrix generator | Conjures targets like `clang-wasm`, `osx-arm64`, etc. |
| **`Makefile`** | Project rules | Builds **one binary per directory** in `src/`. |
| **`.dockerignore`** | Context diet plan | Keeps bulky things (.git, out/, IDE junk) out of image builds. |
| **`lib/`** | Git submodules | External code; pulled shallow for speed. |
| **`sys/`** | Header symlinks | Pretend-system roots for exotic targets. |
| **`inc/`** | Project headers | Stable API surface. |
| **`src/<app>/`** | Source trees | Each sub-dir becomes its own executable in `out/<target>/bin/`. |
| **`tpl/<template>/`** | Scaffolds | `make new basic mytool` clones a template straight into `src/`. |
| **`test/unit/`**<br>**`test/case/`**<br>**`test/load/`** | Three flavours of C tests | Run with pattern targets like `unit-test-parser`. |
| **`out/<target>/`** | Build artefacts | Autogenerated; ignored by Git. |
| **`doc/`** & **`web/`** | Writeups / static assets | Optional, kept outside the critical path. |

***

### How it works (hand-wavy edition)  
1. Launch script ensures the container exists.	
2. Inside the container, `metabuild.mk` figures out which compiler/arch pair you asked for.  
3. The top-level `Makefile` fans out over every `src/<app>/` folder and links an independent binary.  
4. Tests compile the same way, spitting coloured ✓/✗ lines.  

Everything else is implementation detail you can ignore until you care.

[1](https://techdocs.broadcom.com/us/en/vmware-sde/telco-cloud/vmware-telco-cloud-automation/3-4/vmware-telco-cloud-automation-deployment-guide/migrating-tca-2-3-x-to-tca-3-0/migrating-vmware-telco-cloud-automation-/setup-migration-container/manual/docker-version-requirements.html)
[2](https://techdocs.broadcom.com/us/en/vmware-sde/telco-cloud/vmware-telco-cloud-automation/3-1/vmware-telco-cloud-automation-deployment-guide/migrating-tca-2-3-x-to-tca-3-0/migrating-vmware-telco-cloud-automation-/setup-migration-container/manual/docker-version-requirements.html)
[3](https://docs.docker.com/engine/install/)
[4](https://docs.docker.com/desktop/release-notes/)
[5](https://endoflife.date/docker-engine)
[6](https://docs.docker.com/security/security-announcements/)
[7](https://www.reddit.com/r/synology/comments/1j5l8tf/docker_engine_finally_updated_to_yet_another/)
[8](https://www.youtube.com/watch?v=ZyBBv1JmnWQ)
[9](https://sites.northwestern.edu/spsit/instructions/minimum-system-requirements-for-docker/)
[10](https://www.docker.com/blog/docker-desktop-4-42-native-ipv6-built-in-mcp-and-better-model-packaging/)
