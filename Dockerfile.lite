# metabuild.Dockerfile - Adds METABUILD source (can use core OR multi as base)
ARG BASE_IMAGE=ghcr.io/frinknet/metabuild:latest
FROM ${BASE_IMAGE}

# Copy METABUILD source
COPY . /metabuild

# Add version
ARG VERSION
RUN test -n "$VERSION" && printf '%s\n' "$VERSION" > /metabuild/VERSION

# Create bootstrap entrypoint script
RUN mv /metabuild/entrypoint.sh /bin/metabuild

ENTRYPOINT ["/bin/metabuild"]
